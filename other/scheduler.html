<!--
---
permalink: /other/scheduler
---
-->

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" media="screen and (min-width: 901px)" href="../CSS/desktop.css" />
    <link rel="stylesheet" media="screen and (max-width: 900px)" href="../CSS/mobile.css" />
    
    <link rel="stylesheet" href="../CSS/style.css">

    <style>
        input.HourBox {width: 24pt;}
        input.MinuteBox {width: 24pt;}

        div.border {color: #78CCAD; border-style: solid; border-width: 1pt; border-radius: 6pt;}

        p {white-space: nowrap;}
        h3 {white-space: nowrap;}

        input.act[type=button] {background-color: lightgray; stroke: none; padding: 10pt 10pt; 
            margin-left: auto; margin-right: auto; font-size: 15pt; color: #505050; 
            font-family: 'Calibri', 'Candara', 'Segoe', "Segoe UI";}

        .inline {display: inline-block;}
    </style>

</head>

<body>


<table id="MainTable">
    
    <tr id="MobileTitleRow">
        <td></td>

        <td id="MobileTitlecolumn">
            <a class="TitleLink" href="https://www.dylancarroll.net">Dylan Carroll</a>
        </td>
    </tr>
    <tr id = "MobileTitleDiv"></tr>


    <tr id="TopBarRow">
        
        <td id="DesktopTitleColumn">
            <a class="TitleLink" href="https://www.dylancarroll.net">Dylan Carroll</a>
        </td>
        <td id="TitleDivColumn" > <div id="TitleDiv"></div> </td>
        
        
        <td>
            <table id="NavTable">
                <tr>
                    <td><a class="NavLink" href="https://www.dylancarroll.net/about">About</a></td>
                    <td><a class="NavLink" href="https://www.dylancarroll.net/animation">Animation</a></td>
                    <td><a class="NavLink" href="https://www.dylancarroll.net/programming">Programming</a></td>
                </tr>
                <tr>
                    
                    <td><a class="NavLink" href="https://www.dylancarroll.net/contact">Contact</a></td>
                    <td><a class="NavLink" href="https://www.dylancarroll.net/other">other</a></td>
                </tr>
            </table>

        </td>
    </tr>
    
    <tr><td id = "ContentPad"></td></tr>

    <tr id="BodyRow"> 
        <table id="BodyTable"><tr>
            <td id="BodyEdge"></td>

            <td>
                <div id="BodyDiv">

                    <div class="border settings" >
                        <table style="margin-left: auto; margin-right: auto; line-height: 0pt; border-spacing: 12pt 0pt;"> 
                        <tbody id="settingsTbody">
                            <tr>
                                <td> <h3 style="line-height: 0pt;"> Settings </td>
                            </tr>

                            <tr>
                                <td > <p>Start Time: </p> </td>
                                <td> <input class=StartTime type="time">  </td>
                                    
                                
                                
                                <td> <p>End Time: </p> </td>
                                <td> <input class=EndTime type="time" >  </td>
                            </tr>
                            
                            <tr>
                                <td> <p>Min Courses</p> </td>
                                <td> <input type="number" min=0 value=0 style="width: 48pt"> </td>


                                <td> <p>Max Courses</p> </td>
                                <td> <input type="number" min=0 style="width: 48pt"> </td>

                                    
                            </tr>
                            
                            <tr>
                                <td> <p>Min Credits</p> </td>
                                <td> <input type="number" min=0 value=0 style="width: 48pt"> </td>
                                    
                                
                                
                                <td> <p>Max Credits</p> </td>
                                <td> <input type="number" min=0 style="width: 48pt"> </td>
                                
                                
                            </tr>
                        </tbody>
                        </table>

                        <div align=center>
                            <input class="inline" type="file" id="saveFile" name="saveFile">
                            <input type=button value="Download Save" onclick="dowload()">

                        </div>
                        &nbsp;

                    </div>

                    &nbsp;

                    <table  style="width: 100%;">
                        <tbody id="CourseTableBody">
                        <tr><td>
                            <div class="border" style="line-height: 0pt;"> 
                                <div align="center">
                                    <h3 class="inline" style="line-height: 0pt;">Course 1</h3>

                                    <p class="inline" style="margin-left: 24pt;">Name:</p> <input type="text" style="width: 72pt;">

                                    <p class="inline" style="margin-left: 24pt;">CRN:</p> <input type="number" style="width: 60pt;">
                                </div>
                                
                                
                                <div align="center">
                                    <p class="inline">Credits:</p> <input type="number" min="0" style="width: 36pt;">
                                
                                    <p class="inline" style="margin-left: 24pt;">Shade:</p>
                                    <select>
                                        <option value="0"></option>
                                        <option value ="1">Dark</option>
                                        <option value="2">Light</option>
                                    </select>

                                    <p class="inline" style="margin-left: 24pt;">Color:</p>
                                    <select>
                                        <option value="0">Red</option>
                                        <option value="1">Orange</option>
                                        <option value="2">Yellow</option>
                                        <option value="3">Green</option>
                                        <option value="4">Teal</option>
                                        <option value="5">Blue</option>
                                        <option value="6">Purple</option>
                                        <option value="7">Grey</option>
                                    </select>
                                </div>

                                <div align="center">
                                    <p class="inline">Start:</p> <input type="time">

                                    <p class="inline" style="margin-left: 12pt;">End:</p> <input type="time">

                                    <p class="inline" style="margin-left: 12pt;">Group:</p> <input type="text" style="width: 36pt;">
                                </div>

                                <div align="center">

                                    <p class="inline">Note:</p> <input class="inline" type="text" style="width: 240pt; margin-left: 12pt;">
                                </div>
                            </div>
                        </td></tr>

                        
                        </tbody>
                    </table>
                    

                    &nbsp;
                    <div align=center style="margin-left: auto; margin-right: auto; display: block;">
                        <input class="act" type="button" onclick="removeCourse()" value="Remove Course">
                        <input class="act" type="button" onclick="addCourse()" value="Add Course">
                    </div>
                    
                    &nbsp;

                    <div id = "DisplayDiv">
                        <div align=center style="margin-left: auto; margin-right: auto; display: block;">
                            <input class="act" type="button" onclick="calcOptions()" value="Calculate Options">
                            <input class="act" type="button" onclick="downloadImages()" value="Download Images">
                        </div>

                        <canvas id="MainCanvas" style="width: 100%; height: 100px; color: #505050 1pt;">

                        </canvas>

                        <div align=center style="margin-left: auto; margin-right: auto; display: block;">
                            <input class="act" type="button" onclick="showPrev()" value="Show Previous">
                            <input class="act" type="button" onclick="showNext()" value="Show Next">
                        </div>


                    </div>

                </div>
            </td>


            <td id="BodyEdge"></td>
        </tr></table>
    </tr>

</table>

</body>

<script>
    var blankCourseElement = `<tr><td>
                            <div class="border" style="line-height: 0pt;"> 
                                <div align="center">
                                    <h3 class="inline" style="line-height: 0pt;">{Course}</h3>

                                    <p class="inline" style="margin-left: 24pt;">Name:</p> <input type="text" style="width: 72pt;">

                                    <p class="inline" style="margin-left: 24pt;">CRN:</p> <input type="number" style="width: 60pt;">
                                </div>
                                
                                
                                <div align="center">
                                    <p class="inline">Credits:</p> <input type="number" min="0" style="width: 36pt;">
                                
                                    <p class="inline" style="margin-left: 24pt;">Shade:</p>
                                    <select>
                                        <option value=""></option>
                                        <option value ="dark">Dark</option>
                                        <option value="light">Light</option>
                                    </select>

                                    <p class="inline" style="margin-left: 24pt;">Color:</p>
                                    <select>
                                        <option value="red">Red</option>
                                        <option value="orange">Orange</option>
                                        <option value="yellow">Yellow</option>
                                        <option value="green">Green</option>
                                        <option value="teal">Teal</option>
                                        <option value="blue">Blue</option>
                                        <option value="purple">Purple</option>
                                        <option value="grey">Grey</option>
                                    </select>
                                </div>

                                <div align="center">
                                    <p class="inline">Start:</p> <input type="time">

                                    <p class="inline" style="margin-left: 12pt;">End:</p> <input type="time">

                                    <p class="inline" style="margin-left: 12pt;">Group:</p> <input type="text" style="width: 36pt;">
                                </div>

                                <div align="center">

                                    <p class="inline">Note:</p> <input class="inline" type="text" style="width: 240pt; margin-left: 12pt;">
                                </div>
                            </div>
                        </td></tr>`;
    var courseCount = 1;
                    

    var startTime = 0;
    var endTime = 0; 
    var minCredits = 0;
    var maxCredits = 0;
    var minCourses = 0;
    var maxCourses = 0;

    function removeCourse() {
        if(courseCount>1){
            var courseTableBody = document.getElementById("CourseTableBody");
            var lastCourse = courseTableBody.childNodes[courseTableBody.childNodes.length - 2];

            lastCourse.remove();

            courseCount -= 1;
        }
    }

    function addCourse() {
        courseCount += 1;

        var template = document.createElement("template");
        template.innerHTML = blankCourseElement.replace("{Course}", "Course " + courseCount);
        
        var newCourseElement = template.content.firstChild;
        
        var courseTableBody = document.getElementById("CourseTableBody");
        var buttonTR = courseTableBody.childNodes[courseTableBody.childNodes.length - 1];

        courseTableBody.insertBefore(newCourseElement, buttonTR);
    }

    class Course{
        constructor(name, crn, group, credits, start, end, shade, color, notes){
            this.name = name; 
            this.crn = crn; 
            this.group = group; 
            this.credits = credits; 
            this.start = timeToMins(start); 
            this.end = timeToMins(end); 
            this.color = colStrToRGB(shade, color); 
            this.notes = notes;
        }

        collides(course1, course2){
            return !((course1.start >= course2.start && course1.start <= course2.end) || (course2.start >= course1.start && course2.start <= course1.end))
        }


    }

    function timeToMins(time){
        var splitTime = time.split(":");
        var hour = splitTime[0];
        var minute = splitTime[1];
        return parseInt(hour)*12 + parseInt(minute);
    }

    function validateCourseForm(course, name, crn, credits, start, end){
        if(name === ""){
            alert("Course " + course + " name can't be empty");
            return false;
        }
        else if(crn === ""){
            alert("Course " + course + " CRN can't be empty");
            return false;
        }
        else if(credits === ""){
            alert("Course " + course + " credits can't be empty");
            return false;
        }
        else if(start === ""){
            alert("Course " + course + " start time can't be empty");
            return false;
        }
        else if(end === ""){
            alert("Course " + course + " end time can't be empty");
            return false;
        }
        else{
            return true;
        }

        
    }

    function colStrToRGB(shadeStr, colorIndStr){
        //Select the correct color from this list
        var color = [ [255, 0, 0],
            [255, 128, 0],
            [255 , 255, ],
            [0, 255, 0],
            [0, 255, 255],
            [0, 0, 255],
            [255, 0, 255],
            [128, 128, 128] ][parseInt(colorIndStr)];

        //Averageing the color with white to make it brigher and with black to make it darker.
        if(shadeStr === "2"){
            color = [color[0]/2 + 128, color[1]/2 + 128, color[2]/2 + 128];
        }
        else if(shadeStr === "1"){
            color = [color[0]/2, color[1]/2, color[2]/2];
        }

        return color;
    }

    function getCourseDatas(){
        var courseTableBody = document.getElementById("CourseTableBody");
        var courseTDs = courseTableBody.children;

        var courses = []

        for(let i = 0; i < courseTDs.length; i++){
            var borderDiv = courseTDs[i].children[0].children[0];

            var div1 = borderDiv.children[0];
            var div2 = borderDiv.children[1];
            var div3 = borderDiv.children[2];
            var div4 = borderDiv.children[3];
            
            console.log(borderDiv);

            var name = div1.children[2].value;
            var crn = div1.children[4].value;
            var credits = div2.children[1].value;
            var shade = div2.children[3].value;
            var color = div2.children[5].value;
            var start = div3.children[1].value
            var end = div3.children[3].value
            var group = div3.children[5].value;
            var notes = div4.children[1].value;

            if(! validateCourseForm(i+1, name, crn, credits, start, end)){
                return false;
            }

            var newCourse = new Course(name, crn, group, credits, start, end, shade, color, notes);
            courses.push( newCourse );

        }

        return courses;
    }

    function updateSettings(){
        var settingsTbody = document.getElementById("settingsTbody");

        var row1 = settingsTbody.children[1];
        var row2 = settingsTbody.children[2];
        var row3 = settingsTbody.children[3];

        var start = row1.children[1].children[0].value;
        var end = row1.children[3].children[0].value;
        var minCourses = row2.children[1].children[0].value;
        var maxCourses = row2.children[3].children[0].value;
        var minCredits = row3.children[1].children[0].value;
        var maxCredits = row2.children[3].children[0].value;

        return validateSettings(start, end, minCourses, maxCourses);
        
    }

    function validateSettings(start, end, minCourses, maxCourses){
        if(start === ""){
            alert("Start Time can't be empty");
            return false;
        }
        else if(end === ""){
            alert("End time can't be empty");
            return false;
        }
        else if(minCourses === ""){
            alert("Min courses can't be empty");
            return false;
        }
        else if(start === ""){
            alert("Max courses can't be empty");
            return false;
        }
        else{
            return true;
        }
    }

    function calcOptions(){
        if(! updateSettings()){
            return false;
        }
        
        
        var courses = getCourseDatas();
        if(courses === false){
            return false;
        } 
        
    }

    function showNext(){

    }

    function showPrev(){

    }

</script>

</html>
